Libpagekite Export - pkexport.c

Instructions for building in Microsoft Visual Stuido 2013 (does not work with older versions)

    -Start Microsoft Visual Studio

    -New Project -> Win32 ConsoleApplication
    
    -Name the project (e.g. pkexport)

    -Press 'ok'

    -Press 'next'

    -Under Application type check 'DLL'

    -Under Additional options check 'Empty Project'

    -Press 'ok'

    -In the solution explorer you should now see the name of your project (pagekitec)

    -Right click it -> Add -> Existing Item

    -Add the following files to the project: 

        -common.h
        -evwrap.h  (in win folder)
        -getopt.h  (in win folder)
        -gettimeofday.h  (in win folder)
        -pagekite_net.h
        -pd_sha1.h
        -pkblocker.h
        -pkconn.h
        -pkerror.h
        -pklogging.h
        -pkmanager.h
        -pkproto.h
        -pkstate.h
        -pkwatchdog.h
        -pthreads.h  (in win folder)
        -utils.h

        -evwrap.c  (in win folder)
        -getopt.c  (in win folder)
        -gettimeofday.c  (in win folder)
        -pd_sha1.c
        -pkblocker.c
        -pkconn.c
        -pkerror.c
        -pklogging.c
        -pkmanager.c
        -pkproto.c
        -pkstate.c
        -pkwatchdog.c
        -utils.c

*********
To build for release follow these additional steps, skip this to build for debug: 

    -Go to Project -> Properties -> Configuration Properties

        -Click "Configuration Manager..."

        -Under "Configuration" choose "Release"

    -Go to Project -> Properties -> Configuration Properties -> Linker -> Advanced

        -Change "Image Has Safe Exception Handlers" to "No (/SAFESEH:NO)" 
         (this will be changed, this is because OpenSLL was built using the Visual Studio 2012 compiler 
          but we are currently compiling the code using the Visual Studio 2013 compiler, I will compile
          the library again using the 2013 compiler to get rid of this).

********** 

    -Now go to Project -> Properties -> Configuration Properties -> C/C++ -> General
        
        -Under "Additional Include Directories" add the following folders:
        
        - ...\libpagekite\win\OpenSSL
        - ...\libpagekite\win
        - ...\libpagekite\libev
        - ...\libpagekite     

    -Go to Project -> Properties -> Configuration Properties -> C/C++ -> Preprocessor

        - Under "Preprocessor Definitions" add "_CRT_SECURE_NO_WARNINGS" (without quotation marks)
          (this disables warnings telling you to use secure microsoft specific functions)

    -Go to Project -> Properties -> Configuration Properties -> Linker

        -Under "Additional Library Directories" add folder 

        - ...\libpagekite\win\OpenSSL\lib


The project should now build for debug .dll
 